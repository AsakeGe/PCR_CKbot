# PCR_CKbot

QQ自动收集核酸采样证明并汇总机器人，目前已经基本可用，但仅限收集与打包发送。

## 使用

### 关于go-cqhttp部分：
  * 需要搭配 [go-cqhttp](https://github.com/Mrs4s/go-cqhttp) 使用。
  * 在配置 go-cqhttp 时，请选择 "HTTP API"
  * 在config.yml中，开启POST
  * 在config.yml中，将 "- url: http://0.0.0.0:5701/ # 地址" 中 “0.0.0.0” 更改为本项目运行设备的IP地址
  * 请牢记在config.yml中设置的正、反向端口，地址
  * 关于本项目的部分：
    * 首先，也是最重要的一点，目前还未做到完全体功能，故仍旧存在使用门槛
    * 在main.py中：
      * Address = '127.0.0.1'
      * Port = 5700
      * app.run(host='0.0.0.0', port=5701)
    * Address 更改为 go-cqhttp 的接收服务器地址
    * Port 更改为 go-cqhttp 的接收端口
    * host 更改为本机地址或保留不变也可 
    * port更改为go-cqhttp的POST端口
    * 运行即可

### 帮助
  * 私聊向机器人发送 #帮助 即可获取使用说明 

### 其他
  * 目前仅针对西安邮电大学每日核酸统计设计，其他要使用的话，建议魔改。
### 使用说明
  * 请严格按照操作步骤，不然会出现什么奇奇怪怪的问题我也不清楚……
    * 在群建立好后，拉go-cqhttp绑定的QQ小号进群，邀请需要上交结果的人入群。
    * 注意：目前是一次性的，如果需要后期让更多人入群需要重新录入数据（待解决）
    * 所有的输入均在群聊天框内输入
    * 第一步
      * 管理员或者群主输入 
        * #创建数据库
    * 第二步
      * 管理员或者群主输入 
        * #班级XXXXX
    * 第三步
      * 管理员或者群主输入 
        * #导入群成员QID
    * 第四步 
      * 所有群成员（包括群主及管理员）输入
        * 学号#班级#姓名
    * 第五步
      * 所有人都可以提交自己的核酸采样截图了
    * 第六步
      * 管理员或者群主输入 
        * #导出
          * 获取可以打包得到数据的日期
    * 第七步
      * 管理员或者群主输入 
        * #YYYY-MM-DD
          * 机器人通过私聊形式发送已打包的截图
    * 第八步
      * 管理员或者群主输入 
        * #未上传
          * 机器人会在群内反馈今日未上传核酸采样截图的人员名单以及人数
    * 第九步
      * 管理员或者群主输入 
        * at未上传
          * 机器人会在群内@今日未上传核酸采样截图的人员并提醒其上传
    * ### 注意：
      * 第五步之前的操作请务必按照顺序来，第五步之后是日常使用方法。
      * 平时请尽量不要在群内做除了核酸采样收集之外的额外操作，会产生什么奇奇怪怪的后果我也不知道。
### 更新
  * 2022-11-24
    * 基本的收集，统计，打包功能已经就绪。由于时间问题，目前只能规规矩矩的按顺序使用命令，重复键入命令可能会导致某些奇奇怪怪的问题，甚至于直接不可用。
  * 2022-11-23：
    * 修改了数据库使用模式，支持多个群使用。
    * 能够使用统计功能了，但自动执行与 @ta 应该会在未来的某一天实现。
    * 